define(["jquery","core/ajax","core/notification","core/modal_factory","core/str"],function(d,b,e,a,c){return{competencyAddSingle:function(f){var g=this;console.log("Add single",f)},competencyAddMultiple:function(f){var j=this;var i=d(f).closest("tr");var k=i.attr("data-id");var g=i.closest("table").find("tr.childof-"+k);if(g.length>0){console.log("children",g);var h=g.first().hasClass("hidden");g.each(function(){if(!h){j.competencyAddSingle(d(this).find(".addsingle"))}else{j.competencyRemoveSingle(d(this).find("removesingle"))}})}},competencyRemoveSingle:function(f){var g=this;console.log("Remove single",f)},modalDescription:function(f){var h=d(f).find(".description").html();var g=d(f).find(".shortname").html();a.create({title:g,body:h,},trigger).done(function(i){i.show()})},toggleInit:function(g){console.log(g);var h=this;var f=d("#coursecompetenciesadd-"+g);f.find('tr[data-path="/0/"]>td>a').each(function(){h.toggleNode(this)});f.find("tr.used").each(function(){h.toggleInitRecursive(this)})},toggleInitRecursive:function(h){var j=this;d(h).removeClass("hidden");d(h).addClass("children-visible");var g=parseInt(d(h).attr("data-childof"));if(g>0){var f=d(h).closest("table").find("tr[data-id="+g+"]");if(f.length>0){var i=d(f).attr("data-path");d("tr.childof-"+g).removeClass("hidden");j.toggleInitRecursive(f)}}},toggleNode:function(g){var h=d(g).closest("tr");var j=h.attr("data-id");var i=h.attr("data-path");var f=h.hasClass("children-visible");if(f){d("tr.childof-"+j).each(function(){var k=d(this).attr("data-path");d('tr[data-path^="'+k+'"]').addClass("hidden")});d(h).removeClass("children-visible")}else{d("tr.childof-"+j).removeClass("hidden");d(h).addClass("children-visible")}},}});